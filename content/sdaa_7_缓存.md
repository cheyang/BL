### 1 缓存基本概念

对频繁访问的数据（如主页），可将其放入到内存中。每次访问时，可以直接从内存中获取，而不用重新计算，这块内存就是缓存。当然，也可以将多台机器联合起来，做成分布式缓存集群。
通常，80%的访问请求会落在20%的数据上，即二八定律。
常使用的缓存包括 客户端本地缓存、CDN、反向代理、服务端本地缓存、分布式缓存等。
使用缓存可以减少后端服务器的压力，提高用户的访问速度。
常使用内存数据库（如Redis、MemCached）作为缓存服务器。

* 什么样的数据该入缓存:
	* 数据访问不均衡，有些数据会被频繁访问，这些数据该入缓存；
	* 入缓存的数据不应该马上失效，否则缓存中的数据和新生成的数据不一致，即脏读。

* 什么样的数据不该入缓存:
	* 频繁修改的数据；
	* 没有热点访问的数据。缓存数据太多时，反而会加大系统负担，增加查找时间。

* (1)缓存失效：缓存中的数据应该设置过期时间，一旦超过过期时间，应该重新计算并生成新的缓存数据。否则会出现缓存中的数据和实际数据不一致的问题，即脏读。
* (2)数据丢失：缓存数据的丢失，不影响访问的结果，但会给后续服务器造成压力，因为可能需要重新从数据库中取数据，甚至重新计算。通常使用缓存服务器集群，将缓存数据分布在多台服务器上。当一台缓存服务器宕机时，存储在其它服务器上的缓存数据不受影响。
* (3)缓存预热：当缓存服务器启动时，可以预先加载一些数据。
* (4)缓存穿透：持续高并发的访问一个不存在的数据时，会将所有的请求发送到后端服务器，给后端服务器造成巨大压力。可以将不存在的key也进行缓存，其value随便填。
